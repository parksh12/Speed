    <!-- 돌아가기 버튼 -->
    <button id="backButton" style="display: none;" onclick="location.reload();">돌아가기</button>

    <script>
        let clickCount = 0;
        let totalTime = 0;
        let gameInterval;
        let currentCircle;
        let startTime;
        let clickTimes = [];
        const totalRounds = 10; // 게임 횟수 설정
        const maxTime = 7; // 게임 시간 설정 (초)
        let allResults = []; // 전체 게임 결과 저장 (이 예제에서는 로컬에 저장)

        // 원 클릭 처리
        function clickCircle(circleId) {
            if (currentCircle === circleId) {
                let endTime = new Date().getTime();
                let reactionTime = (endTime - startTime) / 1000; // 초 단위로 계산
                clickTimes.push(reactionTime);
            }
            if (clickCount >= totalRounds) {
                endGame();
            }
        }

        // 원이 랜덤으로 깜빡이는 함수
        function showRandomCircle() {
            // 모든 원을 검정색으로 설정
            for (let i = 1; i <= 9; i++) {
                document.getElementById('circle' + i).style.backgroundColor = 'black';
            }

            // 랜덤 원 깜빡이기
            const randomCircle = Math.floor(Math.random() * 9) + 1;
            document.getElementById('circle' + randomCircle).style.backgroundColor = 'red';

            currentCircle = randomCircle;
            startTime = new Date().getTime(); // 원이 깜빡인 시간 기록
        }

        // 게임 시작 함수
        function startGame() {
            totalTime = maxTime;
            clickCount = 0;
            document.getElementById('result').textContent = '';
            document.getElementById('backButton').style.display = 'none';
            clickTimes = [];

            gameInterval = setInterval(function() {
                totalTime--;
                if (totalTime <= 0) {
                    clearInterval(gameInterval);
                    endGame();
                } else {
                    showRandomCircle();
                }
            }, 700);

            setTimeout(() => {
                clearInterval(gameInterval);
                endGame();
            }, maxTime * 1000);
        }

        // 게임 종료 처리 함수
        function endGame() {
            clearInterval(gameInterval);
            let totalReactionTime = clickTimes.reduce((sum, time) => sum + time, 0);
            let averageTime = totalReactionTime / totalRounds;

            // 결과 저장 (전체 게임 결과에 추가)
            allResults.push(averageTime);

            // 티어 나누기 (상위 몇 %에 해당하는지 계산)
            allResults.sort((a, b) => a - b); // 반응 시간 오름차순 정렬
            let rank = (allResults.indexOf(averageTime) + 1) / allResults.length; // 몇 %에 해당하는지 계산
            let tier = '';

            if (rank <= 0.001) {
                tier = '그랜드 마스터';
            } else if (rank <= 0.01) {
                tier = '마스터';
            } else if (rank <= 0.1) {
                tier = '다이아몬드';
            } else if (rank <= 0.3) {
                tier = '플래티넘';
            } else if (rank <= 0.5) {
                tier = '골드';
            } else if (rank <= 0.8) {
                tier = '실버';
            } else {
                tier = '브론즈';
            }

            // 게임 결과 표시
            document.getElementById('result').textContent = `게임 끝! 평균 반응 시간: ${averageTime.toFixed(3)}초\n티어: ${tier}`;
            document.getElementById('backButton').style.display = 'block';
        }

        // 시작 게임
        startGame();
    </script>
</body>
</html>