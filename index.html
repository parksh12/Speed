<!doctype html>
<html>
<head>
    <!-- 기본 메타데이터 및 스타일 -->
    <meta charset="utf-8">
    <title>순발력 측정기</title>
    <link rel="icon" type="image/png" href="파비콘 이미지 URL">
    
    <style>
        /* 전체 레이아웃 설정 */
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }

        h1 {
            font-size: 2em;
            text-align: center;
        }

        h3 {
            font-size: 1.2em;
            text-align: center;
        }

        /* 9개의 원을 위한 스타일 */
        .circle-container {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 10px;
            margin-top: 20px;
        }

        .circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: red;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .active {
            background-color: black;
        }

        .hidden {
            visibility: hidden;
        }

        /* 버튼 스타일 */
        button {
            font-size: 20px;
            padding: 15px 30px;
            cursor: pointer;
            border: none;
            background-color: #4CAF50;
            color: white;
            border-radius: 10px;
            transition: background-color 0.3s;
            margin-top: 20px;
        }

        button:hover {
            background-color: #45a049;
        }

        /* 결과 및 티어 표시 */
        #resultDisplay {
            font-size: 1.2em;
            margin-top: 20px;
        }

        #resultContainer {
            display: none;
            text-align: center;
        }

        #gameContainer {
            display: block;
        }
    </style>
</head>

<body>
    <!-- 페이지 제목 및 부가 설명 -->
    <h1>순발력 측정기</h1>
    <h3><a href="https://goodstock18.tistory.com/m/entry/Bookmark-Collection">by.shp98</a></h3>
    <hr>

    <!-- 게임 컨테이너 -->
    <div id="gameContainer">
        <div class="circle-container">
            <div class="circle" onclick="circleClick(0)"></div>
            <div class="circle" onclick="circleClick(1)"></div>
            <div class="circle" onclick="circleClick(2)"></div>
            <div class="circle" onclick="circleClick(3)"></div>
            <div class="circle" onclick="circleClick(4)"></div>
            <div class="circle" onclick="circleClick(5)"></div>
            <div class="circle" onclick="circleClick(6)"></div>
            <div class="circle" onclick="circleClick(7)"></div>
            <div class="circle" onclick="circleClick(8)"></div>
        </div>

        <!-- 시작 버튼 -->
        <button onclick="startGame()">게임 시작</button>
    </div>

    <!-- 결과 표시 영역 -->
    <div id="resultContainer">
        <div id="resultDisplay"></div>
        <button onclick="resetGame()">돌아가기</button>
    </div>

    <script>
        let activeCircle = null;  // 현재 깜빡이는 원
        let clickCount = 0;  // 클릭 횟수
        let totalTime = 0;  // 총 소요 시간
        let totalClicks = 0;  // 총 클릭 횟수
        let tier = "";  // 최종 티어

        const circles = document.querySelectorAll('.circle');
        const resultDisplay = document.getElementById("resultDisplay");
        const resultContainer = document.getElementById("resultContainer");
        const gameContainer = document.getElementById("gameContainer");

        // 게임 시작 함수
        function startGame() {
            clickCount = 0;
            totalTime = 0;
            totalClicks = 0;
            resultDisplay.textContent = "게임이 시작되었습니다!";
            resetCircles();
            gameContainer.style.display = "block";
            resultContainer.style.display = "none";
            startRound();
        }

        // 원을 초기화하는 함수
        function resetCircles() {
            circles.forEach(circle => {
                circle.classList.remove('active');
                circle.classList.remove('hidden');
            });
        }

        // 순발력 측정용 원 깜빡이기
        function startRound() {
            if (clickCount >= 20) {
                finishGame();
                return;
            }

            setTimeout(() => {
                const randomCircleIndex = Math.floor(Math.random() * 9);
                const randomCircle = circles[randomCircleIndex];
                randomCircle.classList.add('active');
                activeCircle = randomCircle;

                const startTime = Date.now();
                randomCircle.onclick = () => {
                    totalClicks++;
                    totalTime += Date.now() - startTime;
                    clickCount++;
                    resetCircles();
                    startRound();
                };

                setTimeout(() => {
                    randomCircle.classList.remove('active');
                }, 200);  // 0.2초 후에 원 깜빡임 종료

            }, Math.random() * 2000);  // 0~2초 사이에 깜빡임 시작
        }

        // 게임 종료 후 결과 표시
        function finishGame() {
            const averageTime = totalTime / totalClicks;
            const accuracy = (totalClicks / 20) * 100;
            tier = getTier(accuracy);

            resultDisplay.textContent = `게임 종료! 평균 반응 시간: ${averageTime.toFixed(2)} ms, 정확도: ${accuracy.toFixed(2)}%`;
            resultDisplay.textContent += `\n당신의 티어는: ${tier}`;
            gameContainer.style.display = "none";
            resultContainer.style.display = "block";
        }

        // 티어 계산 함수
        function getTier(accuracy) {
            if (accuracy >= 99) {
                return "그랜드 마스터";
            } else if (accuracy >= 90) {
                return "마스터";
            } else if (accuracy >= 80) {
                return "다이아몬드";
            } else if (accuracy >= 70) {
                return "플레티넘";
            } else if (accuracy >= 50) {
                return "골드";
            } else if (accuracy >= 30) {
                return "실버";
            } else {
                return "브론즈";
            }
        }

        // 원 클릭 처리 함수
        function circleClick(index) {
            // 클릭은 순발력 측정에만 사용되므로 클릭했을 때 아무 것도 하지 않도록 할 수 있습니다.
        }

        // 게임 초기화 및 돌아가기 버튼
        function resetGame() {
            gameContainer.style.display = "block";
            resultContainer.style.display = "none";
            startGame();
        }
    </script>
</body>
</html>